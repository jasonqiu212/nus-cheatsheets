\documentclass{article}
\usepackage[a4paper, margin=3mm, landscape]{geometry}
\usepackage{multicol}
\usepackage{xcolor}
\usepackage{enumitem}
\usepackage{amsmath}
\usepackage{listings}
\usepackage{soul}

\pdfinfo{
  /Title (ST1131.pdf)
  /Creator (TeX)
  /Producer (pdfTeX 1.40.0)
  /Author (Jason Qiu)
  /Subject (ST1131)
  /Keywords (ST1131, nus, cheatsheet,pdf)
}

\pagestyle{empty}
\setcounter{secnumdepth}{0}
\setlength{\columnseprule}{0.25pt}

% Redefine section commands to use less space
\makeatletter
\renewcommand{\section}{\@startsection{section}{1}{0mm}%
  {-1ex plus -.5ex minus -.2ex}%
  {0.5ex plus .2ex}%x
{\normalfont\large\bfseries}}
\renewcommand{\subsection}{\@startsection{subsection}{2}{0mm}%
  {-1explus -.5ex minus -.2ex}%
  {0.5ex plus .2ex}%
{\normalfont\normalsize\bfseries}}
\renewcommand{\subsubsection}{\@startsection{subsubsection}{3}{0mm}%
  {-1ex plus -.5ex minus -.2ex}%
  {1ex plus .2ex}%
{\normalfont\small\bfseries}}%
\makeatother

% Adjust spacing for all itemize/enumerate
\setlength{\leftmargini}{0.5cm}
\setlength{\leftmarginii}{0.5cm}
\setlist[itemize,1]{leftmargin=2mm,labelindent=1mm,labelsep=1mm}
\setlist[itemize,2]{leftmargin=4mm,labelindent=1mm,labelsep=1mm}

% Font
\renewcommand{\familydefault}{\sfdefault}

% Define colors for math formulas
\definecolor{myblue}{cmyk}{1,.72,0,.38}
\everymath\expandafter{\the\everymath \color{myblue}}

% Custom command for keywords
\definecolor{highlight}{RGB}{251,243,218}
\newcommand{\keyword}[2][]{\sethlcolor{highlight}\hl{\textbf{#2}} #1 - }
\newcommand{\ilkeyword}[1]{\sethlcolor{highlight}\hl{\textbf{#1}}}

% Define colors and style for code
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codered}{HTML}{CC241D}
\definecolor{backcolor}{rgb}{0.95,0.95,0.95}
\lstdefinestyle{codestyle}{
  backgroundcolor = \color{backcolor},
  commentstyle = \color{codegray},
  keywordstyle = \color{codered},
  stringstyle = \color{codegreen},
  basicstyle = \ttfamily,
  breakatwhitespace = false,
  showstringspaces = false,
  breaklines = true,
  showtabs = false,
  tabsize = 2
}
\lstset{style = codestyle}

% -----------------------------------------------------------------------
\begin{document}
\begin{multicols*}{4}
\footnotesize

% Title box
\begin{center}
  \fbox{
    \parbox{0.8\linewidth}{
      \centering \textcolor{black}{
        {\Large\textbf{ST1131}} \\
        \normalsize{AY21/22 Sem 2}} \\
        {\footnotesize \textcolor{gray}{github.com/jasonqiu212}}
    }
  }
\end{center}

\section{01. Exploratory Data Analysis}

\begin{itemize}
  \item \textbf{Quantitative Variable}: Discrete vs. Continuous
  \item \textbf{Categorical Variable}: Ordinal vs. Nominal
  \item Difference: Is distance between 2 points meaningful?
\end{itemize}

\subsection{Single Variable}

\subsubsection{Frequency Table - Categorical}
\begin{itemize}
  \item \keyword{Proportion}{aka relative frequency. $\frac{\text{\# of obs. in 1 cat.}}
  {Total \# of obs.}$}
  \item \keyword{Modal Frequency}{Category with highest frequency}
  \item Summarizing: Modal category and its proportion 
\end{itemize}

\subsubsection{Bar Plots - Categorical}
\begin{itemize}
  \item Summarizing: Modal category and its proportion, Categories with high/low
  proportions, Mention trends if ordinal
\end{itemize}

\subsubsection{Histogram - Quantitative}
\begin{itemize}
  \item Skewed left/right: Left/right tail is longer 
  \item Summarizing: Outlier, Unimodal/Bimodal/Multimodal, Skewness 
\end{itemize}

\subsubsection{Describing Center}
\begin{itemize}
  \item \keyword{Mean}{$\bar{X} = \frac{1}{n} \sum_{i=1}^{n} x_{i}$}
  \begin{itemize}
    \item Linear Transformation: $\hat{Y} = b \hat{X} + a$
    \item Sensitive to outliers, unlike median
  \end{itemize}
  \item \keyword{Median}{$X_{(0.5)}$}
  \item If $\bar{X} > X_{(0.5)}$, skew right. If $\bar{X} < X_{(0.5)}$, skew left.
\end{itemize}

\subsubsection{Describing Variability}
\begin{itemize}
  \item \keyword{Range}{Sensitive to outliers}
  \item \keyword{Variance}{$S^{2} = \frac{1}{n - 1} \sum_{i=1}^{n} (x_{i} - \bar{x})^2$}
  \item \keyword{Standard deviation}{$sd = \sqrt{S^2}$}
  \begin{itemize}
    \item Linear Transformation: $S_{y}^2 = b^2s_{x}^2$ $S_{y} = |b|s_{x}$
  \end{itemize}
  \item \keyword{Inter-quartile Range (IQR)}{$Q_{3} - Q_{1}$}
  \begin{itemize}
    \item \keyword{Quantile}{($q_{p}$) Value such that p of observations are below}
    \item Lower quartile ($Q_{1}$), Median ($Q_{2}$), Upper quartile ($Q_{3}$)
  \end{itemize}
  \item If symmetric, mean and variance. If skewed, median and IQR.
\end{itemize}

\subsubsection{Boxplot - Variability}
  \begin{itemize}
    \item Includes: Min, Q1, Q2, Q3, Max
    \item \keyword{Outliers}{$< Q_{1} - 1.5IQR \text{ or } > Q_{3} + 1.5IQR$}
    \item \keyword{Max/min Whisker Reach}{Boundary of outliers}
    \item \keyword{Upper/lower Whisker}{Min/max obs. excluding outliers}
    \item Does not show features of distribution. If unimodal, can show skewness.
    \item Summarizing: Median, Outliers, Compare medians and IQR if $>1$ boxplots
  \end{itemize}

\subsection{Two Variables}
\begin{itemize}
  \item Response Variable vs. Explanatory Variable
\end{itemize}

\subsubsection{Bar Plots - 2 categorical}

\subsubsection{Contingency Table - 2 categorical}
\begin{itemize}
  \item \keyword{Conditional Percentage}{\% out of total}
  \item \keyword{Join Percentage}{\% out of some group. Use explanatory as group.}
  \item Be careful of phrasing (Eg. Ppl w/o cancer of PMH users vs. PMH users of 
  those w/o cancer)
  \item \keyword{Relative Risk}{Ratio of 2 percentages. (Eg. \% of cancer in PMH users
  is 1.24 times the \% of cancer in non-PMH users)}
\end{itemize}

\subsubsection{2 Boxplots - 1 Categorical and 1 Quantitative}

\subsubsection{Scatter Plot - 2 Quantitative Variables}
\begin{itemize}
  \item Summarizing: Pos./neg. association, Linear, Constant variability, Outliers
\end{itemize}
\textbf{Correlation} - $r \in [-1, 1]$
\begin{itemize}
  \item 2 variables have same correalation, no matter $x \sim y$ or $y \sim x$
  \item Correlation is linear, when $r = \pm 1$
\end{itemize}

\section{02. Data Collection}

\begin{itemize}
  \item \keyword{Confounding Variable}{Related to exp. and resp. variable. 
  Confounds their association. Observed.}
  \item \keyword{Lurking Variable}{Unobserved}
  \item \keyword{Experimental Study}{Assign subjects (or \ilkeyword{experimental units}) 
  to \ilkeyword{treatments} and observe 
  response variable}
  \begin{itemize}
    \item Pros: Control over lurking variables 
    \item Cons: Costly, Unethical
  \end{itemize}
  \item \keyword{Observational Study}{Explanatory and response variable observed 
  for subjects. No treatments.}
\end{itemize}

\subsubsection{Sample Survey}
\begin{enumerate}
  \item Identify population
  \item Compile \keyword{sampling frame}{Where sample is from}
  \item \keyword{Sampling design}{How to choose subjects from sampling frame}
  \begin{itemize}
    \item \keyword{Simple Random Sample}{Each sample has same chance of being chosen}
  \end{itemize}
\end{enumerate}
\textbf{Sources of Bias in Sample Survey:}
\begin{itemize}
  \item \keyword{Sampling Bias}{Sample not random or undercoverage}
  \item \keyword{Non-response Bias}{No response from subject}
  \item \keyword{Response Bias}{Subject does not answer truthfully}
\end{itemize}
\textbf{Elements of Good Experimental Study:}
\begin{itemize}
  \item Control comparison group
  \item Randomization: Eliminate lurking variables
  \item Blinding the study: Placebo
\end{itemize}

\section{03. Probabililty}
\begin{itemize}
  \item \keyword{Sample space}{($S$) Set of all possible outcomes}
  \item \keyword{Event}{($E$) Subset of sample space}
  \item $P(A) = \frac{\text{\# of outcomes in A}}{\text{Total \# of possible outcomes}}$
\end{itemize}
\subsection{Axioms of Probability}
\begin{enumerate}
  \item $0 \leq P(A) \leq 1$
  \item $P(S) = 1$
  \item If A and B are mutually exclusive (or \ilkeyword{disjoint}), then $P(A \cup B) = P(A) + P(B)$ 
  and $P(A \cap B) = 0$
  \item $P(A \cup B \cup C) = P(A) + P(B) + P(C) - P(A \cap B) - P(A \cap C) - 
  P(B \cap C) + P(A \cap B \cap C)$
\end{enumerate}
\textbf{For any events A and B:}
\begin{itemize}
  \item $P(A^{c}) = 1 - P(A)$
  \item $P(A \cup B) = P(A) + P(B) - P(A \cap B)$
  \item $P(A) = P(A \cap B) + P(A \cap B^{c})$
  \item A and B are \textbf{independent} if $P(A \cap B) = P(A)P(B)$
\end{itemize}

\subsection{Conditional Probability}
$P(A|B) = \frac{P(A \cap B)}{P(B)}$

\subsection{Law of Total Probabililty}
$P(A) = P(A \cap B_{1}) + ... + P(A \cap B_{n})$

\subsection{Bayes' Theorem}
$P(B_{i} | A) = \frac{P(A|B_{i})P(B_{i})}{P(A|B_{1})P(B_{1}) + ... + P(A|B_{n})P(B_{n})}$

\subsection{Epidemiological Terms:}
\begin{itemize}
  \item \keyword{Sensitivity}{Given has disease, prob. of positive test}
  \item \keyword{Specificty}{Given has no disease, prob. of neg. test}
  \item \keyword{Prevalence}{$\frac{\text{\# of people with disease}}{\text{Total population}}$}
\end{itemize}

\section{04. Random Variables}
\begin{itemize}
  \item \keyword{Random variable}{Unpredictable outcome of exp.}
  \item \keyword{Probability distribution of random variable}{Possible values and their probabilities}
\end{itemize}

\subsection{Discrete Random Variables}
\begin{itemize}
  \item \textbf{Probability distribution}: ($P_{x}$) Prob. for each possible x. 
  Sum of all $P_{x} = 1$
\end{itemize}

\subsubsection{Mean}
\begin{itemize}
  \item aka \ilkeyword{expected value}. $\mu = \sum_{x}xP_{x}$
  \item Mean of observations approach $\mu$ with lots of obs.
  \item Linear transformation: $E(Y) = a\mu + b$ and $E(a_{1}x_{1} + ... + a_{n}x_{n})
  = a_{1}\mu_{1} + ... + a_{n}\mu_{n}$
  \item If $x_{1}, ..., x_{n}$ have same prob. distri., mean of these variables 
  ($\bar{X}$) is a random variable where $E(\bar{X}) = \frac{1}{n} \sum_{i = 1}^{n} \mu_{i} = \mu$
\end{itemize}

\subsubsection{Variance}
\begin{itemize}
  \item $\sigma ^2 = \sum_{x} P_{x}(x - \mu)^2$ and sd: $\sigma$
  \item Linear transformation: $Var(Y) = b^2 Var(X) = b^2 \sigma^2$ and $Var(a_{1}x_{1} + ... + a_{n}x_{n})
  = a_{1}^2 \sigma_{1}^2 + ... + a_{n}^2 \sigma_{n}^2$
  \item Likewise, $Var(\bar{X}) = \frac{\sigma^2}{n}$
\end{itemize}

\subsection{Continuous Random Variables}
\begin{itemize}
  \item \textbf{Probability distribution}: Represented by \ilkeyword{probability density function}.
  Area under curve = 1.
  \item Mean and variance have same properties as discrete
\end{itemize}

\subsection{Binomial Distribution}
\begin{itemize}
  \item \keyword{Combinations}{${n \choose k} = \frac{n!}{k!(n - k)!}$}
\end{itemize}
\textbf{3 Conditions for binomial distribution:}
\begin{enumerate}
  \item n trials with 2 outcomes
  \item Each trial has probability of p to succeed
  \item All trials are independent
\end{enumerate}
\keyword{Binomial Random Variable}{\# of successes in n trials}
\begin{itemize}
  \item Follows distribution: $Bin(n, p)$
  \item \keyword{Bernoulli Distribution}{$Bin(1, p)$. Sum of Ber. $\sim$ Bin.}
\end{itemize}
\textbf{Binomial Formula}: Suppose $X \sim Bin(n, p)$
\begin{itemize}
  \item $P(X = x) = {n \choose x} p^x (1 - p)^{n - x}$
  \item $E(X) = np$
  \item $Var(X) = np(1 - p)$
\end{itemize}

\subsection{Normal Distribution}
\begin{itemize}
  \item Symmetric about $\mu$, bell-shaped
  \item $X \sim N(\mu, \sigma^2)$
  \item \keyword{Standard Normal Distribution}{$N(0, 1)$}
  \item Lin. transf. of Normal Random Variable: Same behavior for mean and variance 
  \item Approximate binomial distribution using $N(np, np(1 - p))$ when $np(1 - p) \geq 5$
\end{itemize}
\keyword{Z-score}{$z = \frac{x - \mu}{\sigma} \sim N(0, 1)$}
\begin{itemize}
  \item Outlier: Any observation with z-score of $>3$ or $< -3$
\end{itemize}

\subsection{QQ Plot}
\begin{itemize}
  \item Purpose: To see if data follows $N(\mu, \sigma^2)$
  \item Compare right/left tails with normal
\end{itemize}

\section{05. Sampling Distribution}

\section{06. Confidence Intervals}

\section{07. Hypothesis Testing}

\section{08. Linear Regression}

\section{09. R Code}

\begin{lstlisting}[language=R, breaklines=true]
# Create matrix, Bind matrices
matrix(c(1:6), nrow=2, ncol=3, byrow=T)
rbind(m, c(1,2,3))

# Read CSV, Add header, Get col. in df
data = read.csv("./crab.txt")
names(data) = c("Subject", "Gender")
data$Subject # Or attach()

# Select, Filter by condition
data[1:8,]
data[Gender == "M" & HW == "A",]

# Summary of vector
summary(marks)

# Replace elements based on condition
ifelse(Gender == "0", "F", "M")

# Return indices that match condition
which(flat == "3 ROOM")

# Frequency Table
table(data)
prop.table(table(data))

# Bar Plot
barplot(table(data))

# Contingency Table 
tab = table(bbd, pmh) # (r, c)
prop.table(tab) # Joint probabililty
prop.table(tab, "pmh") # Conditional probability on pmh groups

# Bar Plot with 2 variables
barplot(proptab)

# Boxplot
bp = boxplot(age~cancer) # quan. ~ cat.
bp$out # Values of outliers
grp = bp$group # Outliers in each group
which(grp == 1) # Index of outliers in group 1
bp$out[which(grp == 1)] 

# Histogram
hist(flatPrice)

# Scatter Plot, Correlation
plot(size, price) # (x-axis, y-axis)
cor(size, price)

\end{lstlisting}

\end{multicols*}
\end{document}